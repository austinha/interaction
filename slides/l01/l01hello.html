---
layout: presentation
title: Lab 1 Slides
description: Lab project--Hello World--
class: middle, center, inverse
---

# SSUI Mobile Lab (Spring 2019)
## Week 1: Intro, Java Refresher, Android Fundamentals

.title-slide-logo[
  ![Android Logo](img/android-logo.png)
]

---

.bold.text-align-center[
  ## How would you make this?
]

![:img Screen shot of a phone, 25%](img/instagram-example.png)

---

## Course Objectives
- Practical applications for learnings in lecture

--
- Understand design considerations when making mobile apps

--
- Design and implement basic Android applications

--
- Debugging in Java and for Android


---
## Introduction to Android

- World's most popular mobile operating system

--

  - Open source
  - Around 75% market share
  - Thousands of supported devices

--

- Exposes Android SDK
  - Framework for building apps on mobile devices

--
  - Written in __Java__ and E__X__tensible __M__arkup __L__anguage (__XML__)

--
  - Relies on other __res__ources including images, localized strings, etc.

--

- We've seen Java, this is what __XML__ in Android looks like:

```xml
    <TextView
      android:id="@+id/main_text_view"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="@string/app_name" />
```
---
## Introduction to Android

- Applications typically follow MVP architecture

--

  - Model, View, Presenter

--

![MVP Diagram](img/mvp-design-pattern.png)

---
## Android Applications

- __Intents__

--

  - Launch components (and provide them with data)

--
  - Not limited to components of the same app
    - Meaning: your components can be started by intents from other applications

--
- Components

--

  - Activity
  - Service
  - Broadcast Receiver
  - Content Providers

---
## Activity
  - [`android.app.Activity`](https://developer.android.com/reference/android/app/Activity)

--
  - Represents a single interface

--
  - Example: Activities for Gmail App
    - Inbox, Message Compose, Spam Folder, etc.
--
  - Activities can be started by other applications, if desired
    - E.g., sharing a photo by email starts Gmail's Message Compose activity

---
## Service
  - [`android.app.Service`](https://developer.android.com/reference/android/app/Service)

--
  - Entry point for background processes

--
  - Example: Spotify's player activity uses a service to play music
    - Could be done by activity alone
--
    - Use of a service allows music to continue when player activity is no longer in the foreground
--
  - Services may be killed and restarted as required by the OS
    - A persistent service such as music playback may use a persistent notification to prevent this

---
## Broadcast Receivers
  - [`android.content.BroadcastReceiver`](https://developer.android.com/reference/android/content/BroadcastReceiver.html)

--
  - Entry point for events outside of regular userflow

--
  - Example: Alarms
    - Application schedules callback with OS in 10 minutes
--
    - In the meantime, the application can be killed
--
    - 10 minutes later, the OS broadcasts the callback event to the app
--
    - App begins playing sound; vibrating

---
## Content Providers
  - [`android.content.ContentProvider`](https://developer.android.com/reference/android/content/ContentProvider)

--
  - Persistent storage of data

--
  - Supports multiple backends, depending on app permissions
    - Local filesystem, web, SQLite DB, etc.
--
  - Can permit access to other applications
    - Contacts can be read and written to by other apps, depending on permissions

---
class: center

## Android Versioning

![:img Android Versioning and Distribution, 65%](img/android-versions-oct2018.png)

--
.center[
### We're going to target .red[Jelly Bean] :) - That's .red[__96.6%__] of devices
]

---
## Android Project Structure

.center[
  ![:img Android Project Structure, 40%](img/android_project_structure.png)
]

---

## Android Project Structure

- `app/src/main/AndroidManifest.xml`

  - Describes application at a high level for both compilation and running
--

  - Includes app package, components, permissions, and hardware features

--

- `app/src/main/java/com.example.myapp/MainActivity.java`
  - The main activity activated when application launches

--

- `app/src/main/res/layout/activity_main.xml`
  - Declares the views and layout of the main activity

--

- `app/build.gradle`
  - Android build tool configuration file

--
  - Includes target and min SDK versions and dependencies

---
## Android Project Structure

- `drawable-<density>/`

  - Images at various pixel densities to accommodate various display resolutions
--

  - Keep filenames consistent between folders

--

- `layout/`
  - Layout XML description files for application activities
--

- `mipmap/`

  - Launcher icons for your application at various sizes and shapes

--

- `values/`

  - A good place to store constants
      - Density-independent pixel values (sizes)
      - Color
--
  - Good for string localization as well
      - Storing strings here makes it much easier to add additional languages in the future!

---

# Quick Java Refresher

---

## What is Java?
--

- Strongly, statically typed language

  - Every variable has a type
  - This type is decided at compile time (mostly)

--

- Compiled, class-based, Object-oriented

--

- Platform agnostic

  - __Write once__, _run anywhere_ without recompilation
  - Especially useful for Android

---

## Java Basics: Primitive Types

--
- Boolean

```java
boolean hasClassStarted = true;
boolean isClassOver = false;
```

--
- Integer

```java
int numStudents = rand.nextInt(0, 30);
```

--
- Float

```java
float gradePointAverage = 3.2f;
```

--
- Double
  - Higher precision than float

```java
double examScore = 97.362;
```

--
- Byte, Short, etc.

---
## Java Basics: Text

--
- Characters

```java
char section = 'B';
```

--
- Strings

```java
String instructor = "Jennifer Mankoff";
```

--
All non-primitives types inherit from `Object` class
  - Including `String`; note the capitalization

---
## Java Basics: Visibility Modifiers

```java
public final String course = "CSE 340";
///...
private final String ssn = "123-45-6789";
```

--
- `private`
  - Kept secret, can only be read/written by `self`
  - Cannot be accessed by subclasses

--
- `package private`
  - This is the default access if no modifier is specified
  - Accessible by all classes in the same package.

--
- `protected`
  - Access restricted to `self`, subclasses, and package

--
- `public`
  - The world can read/write (fields) or call (methods)

---
## Java Basics: Visibility Modifiers

--
  - Generally, you want to be as restrictive as possible
    - Usually, this means `private`

--

  - Create getter/setter methods to modify the member variables

--

  - .red[__Almost never use__ `public`] for fields
    - Except for constants

---
## Java Basics: `final`

--
- Prevent value from changing after initialization

```java
final double courseGrade = 95.0; // cannot be modified ever!
```

--
- Prevent subclassing

```java
  public final class Person {
      // can't subclass (for example to make a Student class)
      // ...
  }
```

--
- Prevent overriding

```java
  public final int getValue() { // can't override!
      return 0;
  }
```

---
## Java Basics: `static`

--
- Use for constants that are the same for all instances of a class

```java
static double SALES_TAX_RATE = 0.07;
```

--
- Methods that can be called without an class instance

```java
static String toString(int i);
// For example Integer.toString(100) => "100";
```

--
- By convention, names are capitalized and snake_cased

---
## Java Basics: Methods
- Methods in Java typically follow this format:

```java
{visibility} [static] [final] returnType methodName(paramType paramName, ...) {
    // ...
}
```

--
- `static` and `final` are optional, special modifiers
- `visibility` is one of `public`, `private`, `protected`, or empty for package private

---
## Java Basics: Method Example

Summing two numbers and returning the answer as a string

```java
public String getSumOfTwoNumbersAsString(int first, int second) {
  int sum = first + second;
  return Integer.toString(sum);
}
```

---
## Java Basics: Declaring a class

```Java
{visibility} class ClassName {
  // Field declarations

  // Method definitions
}
```

---
## Java Basics: Constructing a Class

```java
public class Student {

  // Class (static) variables -
  public static final String STUDENT_KEY = "STUDENT";
  private static final String ID_PREFIX = "S";

  // Instance Variables
  private String idNumber;
  private String name;

  // Constructors - used to create an instance
  Student(String name, String idNumber) {
    this.name = name;
    this.idNumber = idNumber;
  }

  // Methods
  public String getPrefixedIdNumber() {
    return ID_PREFIX + idNumber;
  }
```

---
## Java Basics: Constructing a Class cont.
```java
  // Getter
  public String getName() {
    return name;
  }

  // Setter
  public void setName(String newName) {
    if (newName == null || newName == "") {
      newName = "Unknown";
    }

    name = newName;
  }

  // ... etc.

}
```

---
## More Java Resources

- Java Documentation (https://docs.oracle.com/javase/8/docs/api/)

- __Online Java Practice Problems__:

  - http://codingbat.com/java

  - https://practiceit.cs.washington.edu/problem/list

---

# Assignment 1

- Running sample code for [Assignment 1: Doodle](/assignments/doodle.html)
- Example: `addImage`
- Understanding Grading
- Other Questions

---
## Environment Setup

- Download [Android Studo](https://developer.android.com/studio/) and install
--

- Keep default installation settings

--
  - We'll be using API 26 as a default for this class
  - But any version above Jellybean will work

---
## Running Sample Code

- Open project in Android Studio

--

- Run configurations should be automatically imported from Gradle
  - If not, `build` should trigger an import

--

- Run with â–º

--

  - Connect an android device by USB or create a new virtual device

--
  - If by USB, debugging must be enabled on the device

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size);
```

### Params:
- `mainCanvas`: Canvas in which to render the image.

--
- `imageName`: Filename of image to draw in `res/drawable`.

--
- `x`: Horizontal distance from top-left corner of canvas to top-left of image.
- `y`: Veritcal distance from top-left corner of canvas to top-left of image.

--
- `size`: Width and height of rendered image, in pixels.

--
### Returns:
- An `ImageView` which has been added to the canvas.

---
## Implementing  `addImage`

Break down into component steps, look up documentation, and implement

1. Create `ImageView`

--
2. Add new view to canvas

--
3. Position and set view size

--
4. Set view contents

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    // Add imageView to mainCanvas
    // Set imageView size and position
    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);
    // Set imageView size and position
    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);

    imageView.getLayoutParams().height = size;
    imageView.getLayoutParams().width = size;

    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);

    imageView.getLayoutParams().height = size;
    imageView.getLayoutParams().width = size;
    imageView.setX(x);
    imageView.setY(y);

    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);

    imageView.getLayoutParams().height = size;
    imageView.getLayoutParams().width = size;
    imageView.setX(x);
    imageView.setY(y);

    int resID = getResources().getIdentifier(imageName, "drawable", getPackage());
    imageView.setImageResource(resID);
    return imageView;
}
```

---
## Grading

.red[TODO]
