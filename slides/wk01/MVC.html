---
layout: presentation
title: Basic Toolkit Abstractions
description: Discussion of basic abstractions for user interfaces
class: middle, center, inverse
---
name: inverse
layout: true
class: center, middle, inverse
---
# Core Toolkit Abstractions

Jennifer Mankoff

CSE 340 Spring 2019 
---
name: normal
layout: true
class: 
---
layout: false

.body[
| Hall of Shame | Hall of Fame|
|---|---|
|![:img Picture of a small sandcastle that is falling apart, 100%](img/sandcastle1.png) | ![:img Picture of a complex sandcastle with LEDs lighting it up, 100%](img/sandcastle2.jpg)
]
---
.title[Impact of Tools]
.body[
![Simple home tools for sandcastle making such as a bucket; funnel; brush; and spackle knife, 90%](img/sandcastletools.gif)
]
---
.title[Today's goals]
.body[
- __Tools & Toolkit Users__
- Common Components
- Model View Controller
- Relate to Android
]
---
# Subtle influence of tools

![:img Sketch of Interface, 70%](img/sketch.png)

---
.title[ Subtle influence of tools]
.body[

![:img High Fidelity Prototype, 70%](img/prototype.png)

]
---
.title[Subtle influence of tools]
.body[
Whorfian Effects
- The way in which our tools influence how we think and thus what we do. 

- Origins are linguistic (e.g. the way in which language about color affects what we perceive)

- Can even affect perception of human emotion!
http://www.radiolab.org/story/91730-new-words-new-world/
]
---
# HCI Software in the present
.left-column[
<div class="mermaid">
  graph LR
  ap[Application Program]
  hlt[High Level Tools]
  t[Toolkit]
  w[Window System]
  o[OS]
  h[Hardware]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill:#7887AB,stroke:#333,stroke-width:6px,width:300px;

class ap,o,h,w yellow
class hlt,t green
</div>
]
---
# HCI Software in the present
.left-column[
<div class="mermaid">
  graph LR
  ap[Application Program]
  hlt[High Level Tools]
  t[Toolkit]
  w[Window System]
  o[OS]
  h[Hardware]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;

class w,ap,o,h yellow
class t green
class hlt darkblue
</div>
]
---
# Example High Level Tool in Android  

![:img Screenshot of the android layout tool, 100%](img/android-editor.gif)

---
# Development Roles
.left-column[
<div class="mermaid">
  graph LR
  ip[Interface Programmer]
  w[Component Developer]
  l[Library Extender]
  a[Architecture Extender]
  t[Toolkit Builder]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;


class ip,t yellow
class w,l,a green
</div>
]
---
# Development Roles
.left-column[
<div class="mermaid">
  graph LR
  ip[Interface Programmer]
  w[Component Developer]
  l[Library Extender]
  a[Architecture Extender]
  t[Toolkit Builder]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;

class t yellow
class w,l,a green
class ip darkblue
</div>
]
.right-column[
Combine library elements according to toolkit rules & following
constraints of architecture. 

Supported by all toolkits
]
---
# Development Roles
.left-column[
<div class="mermaid">
  graph LR
  ip[Interface Programmer]
  w[Component Developer]
  l[Library Extender]
  a[Architecture Extender]
  t[Toolkit Builder]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;

class ip,t yellow
class w,l,a green
class w darkblue
</div>
]
.right-column[
Creates new, re-usable interactors (e.g. to support new forms of
input/direct manipulation).

Supported by many toolkits
]
---
# Interaction Techniques
- A method for carrying out a specific interactive task
- Example: enter a number in a range
 - Swiping to invoke an action
 - Gesture based text entry

.left-column[
![img: A picture of a finger left-swiping to invoke an action on a
list on an android phone, 30%](img/android-swipe.png)
]
.right-column[
![img: A picture of gesture based text entry on an android phone, 25%](img/android-type.jpg)
]
---
# Development Roles
.left-column[
<div class="mermaid">
  graph LR
  ip[Interface Programmer]
  w[Component Developer]
  l[Library Extender]
  a[Architecture Extender]
  t[Toolkit Builder]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;

class ip,t yellow
class w,a green
class l darkblue
</div>
]
.right-column[
Similar to interactor developer, but may create new forms of layout, types of input, etc.

Supported by a few toolkits
]
---
# Toolkit Support for Styling

.left-float[
![img: A picture of the same dialogue box styled 4 different ways, 10%](img/novellibrary.png)
]
.right-float[
subArctic allowed visually rich, dynamically resizable, images to be
provided using primarily conventional drawing tools (and with no
programming or programming-like activities at all).  Scott E. Hudson
and Kenichiro Tanaka. (UIST '00) 
]
---
# Development Roles
.left-column[
<div class="mermaid">
  graph LR
  ip[Interface Programmer]
  w[Component Developer]
  l[Library Extender]
  a[Architecture Extender]
  t[Toolkit Builder]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;

class ip,t yellow
class w,l,a green
class a darkblue
</div>
]
.right-column[
Modifies the flow of information within a toolkit to create entirely new effects (e.g. adding support for command objects)

Supported by very few toolkits
]
---
# Architecture Extender: Animation

.right-column50[
![:img A picture of a phone interface using animation to show a menu, 100%](img/animation.gif)
]

Integrated into existing GUI toolkit

Primary abstraction: transition
- models movement over time
- through arbitrary space of values (e.g., color)
- screen space is most common 


.footnote[Great post about [types of animation on mobile phones](https://yalantis.com/blog/-seven-types-of-animations-for-mobile-apps/), also
source of the image]

---
# Development Roles
.left-column[
<div class="mermaid">
  graph LR
  ip[Interface Programmer]
  w[Component Developer]
  l[Library Extender]
  a[Architecture Extender]
  t[Toolkit Builder]

classDef bluegreen fill: #d1e0e0,stroke:#333,stroke-width:2px,width:300px;
classDef blue fill:#e6f3ff,stroke:#333,stroke-width:2px,width:300px;
classDef green fill:#dbf0db,stroke:#333,stroke-width:4px,width:300px;
classDef yellow fill:#ffffe6,stroke:#333,stroke-width:4px,width:300px;
classDef darkblue fill: #ccffff,stroke:#333,stroke-width:6px,width:300px;

class ip,t yellow
class w,l,a green
class t darkblue
</div>
]
.right-column[
Creates entirely new toolkits that enable radical new forms of interaction

e.g. RapID https://make4all.org/portfolio/rapid/
]
---
# Toolkit Builder: Physical Interfaces
Creates entirely new toolkits that changes what we can do


![:youtube Physical Interface made out of RFID tags,4k15uXpp7-g]

---
# Toolkit for Overloading Existing Interfaces
Prefab supports pixel based enhancements: write interpretation logic that can be composed, reused, and shared to manage the multi-faceted nature of pixel-based interpretation; robustly annotate interface elements with metadata needed to enable runtime enhancements. 

![:youtube Prefab Demo,lju6IIteg9Q]

---
.title[ But we look at General Principals]
.body[

Particular toolkits tend to be mired in a particular platform

Along comes the next big thing  (e.g., iPhone) and you’ll need to
learn a new one 

Labs are platform specific looks at lecture concepts 

If you learn the structures/concepts (and esp. rationale behind them)
that survives change better 

]
---
.title[Today's goals]
.body[
- Tools & Toolkit Users
- **Common Components**
- Component Anatomy
- Relate to Android
]

---
.left-column[
# Significant Stagnation

- Basic GUI components invented 1970s
- Windows, Icons, Menus, Pointers (“WIMP”)
- “Perfected” by Macintosh in 1984
- Not much change since then (even with web)
]
.right-column[
## Most GUIs still use the same 7-10 interaction techniques

![:img Picture of a very old mac control panel showing typical interactors at the time,80%](img/interactors1.png)
]
???
- Work well, uniform
- Good for usability
- GUI is victim of its own success
- Opportunities lost by not customizing interaction techniques to tasks
- Hard for better techniques to get traction
- Only very recently with mobile devices (touch based) have we seen lots of new techniques get a major foothold
---
.title[In class Exercise]
.body[
Let's look at interactors in Android Studio
![:img A picture of the setup for android study in which we can layout
components,80%](img/android-components.png)
]
???
Menu, Button(types), Slider, Scrollbar, Spinner, List box, Icon, Link,
Text box, Label,
---
.title[In class Exercise]
.body[
Quick Tour | tutorial
for [building a ui](https://developer.android.com/training/basics/firstapp/building-ui)

![:img A picture of the setup for android study in which we can layout
components,80%](img/android-components2.png)
]

---
.title[ Environment Setup]
.body[

- Should already be done: Download [Android Studo](https://developer.android.com/studio/) and install
]
--
.body[
- Keep default installation settings
]
--
.body[
  - We'll be using Nougat as a default for this class
  - But any version above Jellybean will work
]
---
.title[What went wrong?]

.body[
Layout: Did things overlap?
Action: Did they react?
]

---
.title[Today's goals]
.body[
- Tools & Toolkit Users
- Common Components
- __Model View Controller__
- Relate to Android

]
---
.left-column[
# Every system has at least 3 different models
]
.right-column[
<div class="mermaid">
graph TD
  S[System Image: <br>Your Implementation&nbsp;] --> |System Feedback&nbsp;| U[User Model: How the user thinks&nbsp; <br>the system works] 
  D[Design Model: How you <br>intend the system to work&nbsp;]-->S
  U -->|User Feedback&nbsp;| S
</div>

]

???
# Relating the Human and the Machine

- Gulf of Execution and Gulf of Evaluation

Gulf of execution is the user 'error' region (user requests
  function the __system DOESNT HAVE__), gulf of
  evaluation is when the user __doesn't realize the system HAS a
functionality__.

---
.title[MVC]
![:img A picture of a person saying "unlock door" (D) with a
connection to A labeled signal lock to open; an arrow (2) to B labeled
"Speech recognition/speaker ID"; a box C labeled "At time (1) access
list: Jen; Ryan; Current person: Ryan; Lock state: Closed"; an arrow
from B to C labeled (3) Change person to Jen; lock open; and an arrow
from C to A labeled (4) Value changed., 110%](img/quiz-mvc.png)

???
Discussion of reading quiz

Sketch out key concepts 
- Input -- we need to know when people are doing things. This needs to be event driven.
- Output -- we need to show people feedback. This cannot ‘take over’ i.e. it needs to be multi threaded
- Back end -- we need to be able to talk to the application. 
- State machine -- we need to keep track of state. 
- What don’t we need? We don’t need to know about the rest of the UI, probably, etc etc
- Model View Controller -- this works within components (draw diagram), but also represents the overall structure (ideally) of a whole user interface
- NOTE: Be careful to write any new vocabulary words on the board and define as they come up.
---
.title[MVC for a button]
.body[
- Diagram it with respect to reading
 - Model
 - View
 - Controller
]
---
.title[Interactor (Component) Model]
.body[
__Encapsulate interactive components__ (interactors)
- Component library (button, slider, container)
- Interface built as a hierarchy of components

__Components drawn by underlying graphics library__
- Input event generation and dispatch
- Historically mouse & keyboard, now touch, ...

__Bounds management & damage/redraw__
- Model geometry, redraw updated regions only
]
---
.title[What about a whole interface]
.body[

![:img Minimalist Recipe App showing the title 'simple food', a heart
for favoriting, a bookmark and sharing icon, the title 'boiled eggs',
a picture of an egg, and a description of what you need to boil an egg
along with a button saying 'cook it', 30%](img/minimalist-app.png)
minimalist-app-ui-37.png

]
---
.title[ MVC in Android]
.body[

- Applications typically follow MVP architecture
]
--
.body[
  - Model, View, Presenter
  ]
---
.title[ MVC in Android]
.body[

- Applications typically follow MVP architecture
- Model, View, Presenter

![:img MVP Diagram, 80%](img/mvp-design-pattern.png)

]
???
- Relationship of MVC to Android software stack
- Discuss Whorfian effects

---
.title[Assignment 1]
.body[
- Running sample code for [Assignment 1: Doodle](/assignments/doodle.html)
- Example: `addImage`
- Understanding Grading
- Other Questions
]
---
.title[Running Sample Code]
.body[
This repository will contain assignment and exercise stubs for CSE340
for the Spring 2019 term. It's recommended that you [fork](https://gitlab.cs.washington.edu/cse340/19sp/forks/new) this
repository. This will allow you to merge any upstream changes we make
to stubs throughout the quarter. You can find instructions on setting
up and maintaining a forked repository [here](https://help.github.com/en/articles/working-with-forks).

![:img Picture of Gitlab for https://gitlab.cs.washington.edu/cse340/19sp with a place to download,100%](img/download-projects.png)
]
---
.title[
Open project in Android Studio]
.body[
- Run configurations should be automatically imported from Gradle
  - If not, `build` should trigger an import
- Run with ►
  - Connect an android device by USB or create a new virtual device
  - If by USB, debugging must be enabled on the device
]
---
.title[ Implementing  `addImage`]
.body[
```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size);
```

### Params:
- `mainCanvas`: Canvas in which to render the image.
- `imageName`: Filename of image to draw in `res/drawable`.
]
--
.body[
- `x`: Horizontal distance from top-left corner of canvas to top-left of image.
- `y`: Veritcal distance from top-left corner of canvas to top-left of image.
]
--
.body[
- `size`: Width and height of rendered image, in pixels.
]
---
.title[ Implementing  `addImage`]
.body[
### Returns:
- An `ImageView` which has been added to the canvas.
]

---
.title[## Implementing  `addImage`]
.body[
Break down into component steps, look up documentation, and implement

1. Create `ImageView`
]
--
.body[
2. Add new view to canvas
]
--
.body[
3. Position and set view size
]
--
.body[
4. Set view contents
]
---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    // Add imageView to mainCanvas
    // Set imageView size and position
    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);
    // Set imageView size and position
    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);

    imageView.getLayoutParams().height = size;
    imageView.getLayoutParams().width = size;

    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);

    imageView.getLayoutParams().height = size;
    imageView.getLayoutParams().width = size;
    imageView.setX(x);
    imageView.setY(y);

    // Set imageView contents using filename
    return imageView;
}
```

---
## Implementing  `addImage`

```java
private ImageView addImage(FrameLayout mainCanvas, String imageName, Float x, Float y, int size) {
    // Create ImageView and add it to mainCanvas.
    ImageView imageView = new ImageView(this);
    mainCanvas.addView(imageView);

    imageView.getLayoutParams().height = size;
    imageView.getLayoutParams().width = size;
    imageView.setX(x);
    imageView.setY(y);

    int resID = getResources().getIdentifier(imageName, "drawable", getPackage());
    imageView.setImageResource(resID);
    return imageView;
}
```
---
.title[Grading]
.body[
Discuss
]
---
.title[Summary]
.body[
- Common Components of an Interface
- Role of MVC in Components
- Role of MVC in whole application
- Intents; Components (Activity; Service; Broadcast Receiver; Content
Provider)
- Role of MVC in Android
- Run some code in Android Studio!
]
